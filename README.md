# Финансовые утилиты

Проект включает набор утилит для обработки финансовых данных, работы с API и генерации отчетности. Включает функции для работы с транзакциями, операциями, курсами валют и ценами акций.

## Структура проекта

### `get_logger.py`

Модуль для создания и настройки логгера. Логирование помогает отслеживать события и ошибки в проекте.

#### Функции:
- **`get_logger()`** — создаёт и возвращает настроенный логгер для записи логов в консоль и файлы.
- **`dec_get_logger()`** — декоратор для добавления логгера в функцию.

---

### `data_loader.py`

Модуль для работы с данными: загрузка и обработка Excel файлов, фильтрация операций по датам и подсчёт транзакций.

#### Функции:
- **`input_date()`** — получает дату от пользователя (по умолчанию используется 15.11.2021 04:57:31).
- **`read_excel(path)`** — читает Excel файл и возвращает его как `pandas DataFrame`.
- **`get_operation_with_range(operation_df, date_end)`** — фильтрует операции по дате.
- **`get_cards_num_and_sum(operation_df)`** — группирует транзакции по номерам карт и суммирует расходы.
- **`top_5_transactions(df)`** — возвращает топ-5 транзакций с наибольшими расходами.

---

### `reports.py`

Модуль для сохранения отчетов и обработки данных о расходах по категориям.

#### Функции:
- **`save_report(*args)`** — декоратор, сохраняющий результаты функции в файл.
- **`spending_by_category(transactions, category, date)`** — рассчитывает расходы по категориям за последние три месяца.

---

### `utils.py`

Модуль с утилитами для работы с внешними сервисами (API для валют и акций) и генерации приветствий.

#### Функции:
- **`get_greeting(date_time: str)`** — генерирует приветствие в зависимости от времени суток.
- **`get_currency_rates()`** — получает курсы валют по данным Центробанка России и настройкам пользователя.
- **`get_stock_prices()`** — получает цены акций по тикерам из настроек пользователя.

---

## Установка

### Установите зависимости:

Для начала работы установите все необходимые библиотеки:

```bash
pip install -r requirements.txt

Использование
Пример 1: Логирование

from develop_fun.get_logger import get_logger

logger = get_logger()
logger.info("Пример использования логгера")

Пример 2: Чтение Excel файла

from develop_fun.data_loader import read_excel

df = read_excel('path_to_file.xlsx')
print(df.head())

Пример 3: Сохранение отчетов

from develop_fun.reports import save_report, spending_by_category

@save_report
def get_spending_report(transactions):
    return spending_by_category(transactions, category='Food')

Пример 4: Получение валютных курсов

from develop_fun.utils import get_currency_rates

currency_rates = get_currency_rates()
print(currency_rates)

Пример 5: Приветствие

from develop_fun.utils import get_greeting

greeting = get_greeting("15.11.2021 04:57:31")
print(greeting)  # "Доброе утро"

Структура данных

    Транзакции:
    Ожидается, что данные о транзакциях будут содержать:

        category: категория транзакции.

        amount: сумма.

        date: дата транзакции в формате DD.MM.YYYY HH:MM:SS.

    Данные о валютных курсах:
    Курсы валют получаются из API ЦБ РФ и настроек пользователя. Валюты, для которых будет запрашиваться курс, задаются в настройках.

    Данные о ценах акций:
    Цены акций получаются через API Finnhub, используя тикеры из настроек пользователя.

Логирование

Логи записываются в файлы, которые сохраняют информацию о событиях и ошибках. Каждый модуль имеет собственный лог.
Разработчик

Имя: Dimap